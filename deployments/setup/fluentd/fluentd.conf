<source>
  @type http
  port 9880
  bind 0.0.0.0

  <endpoint /health>
    @type proc
    def process_request(env)
      [200, { "Content-Type" => "application/json" }, ["{}"]]
    end
  </endpoint>
</source>

<source>
    @type forward
    port 24224
    bind 0.0.0.0
</source>

<filter **>
    @type parser
    format json
    key_name log
    reserve_data true
    reserve_time true
    inject_key_prefix logs.
</filter>

<match **>
  @type stdout
</match>

<match **>
    @type opensearch
    host opensearch
    port 9200
    scheme http
    logstash_format true
    logstash_prefix fluentd
    logstash_dateformat %Y.%m.%d
    include_tag_key true
    tag_key @log_name
    flush_interval 5s 
</match>
